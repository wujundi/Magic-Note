# Linux常用命令

标签（空格分隔）： linux

---
[TOC]

***

# 快捷键

## 清屏
ctrl+l 

## 强制结束当前程序
ctrl+c

***

# 常用小命令

## 复现最近命令
方向键：上、下

## 执行指定文件
直接使用该文件名开头即可
比如：执行 /usr/local/tomcat/start.sh 文件
就可以 [root@localhost]# /usr/local/tomcat/start.sh
或者在其目录下 ./start.sh（本质就是表达本目录下的文件名）

## 终端切换中英文
LANG="zh_CN.UTF-8"
LANG="en_US.UTF-8"
LANG=en_US
LANG=zh_CN.UTF8

## 切换为root用户
su

## 切换为普通用户
su wujundi(su 普通用户名)

## 关机(切断电源式)
poweroff

## 查看帮助信息
[命令] --help

## 显示系统时间
date

## 查看相关命令的位置
whereis [命令名]

## 跳转目录位置
cd

## 双击 tab 键可以自动补全
提示目录，自动补全目录；
提示命令，自动补全命令



***

# 常见目录的作用
| 目录 | 作用 |
|:-:|:-:|
| / | 根目录|
|/bin| 命令保存目录（普通用户就可以读取的命令）|
|/boot | 启动目录，启动相关的文件|
|/dev |设备文件保存目录（硬件文件）|
|/etc |配置文件保存目录|
|/home |普通用户的家目录|
|/lib |系统库保存目录（linux的函数库）|
|/mnt |系统挂载目录（外接存储设备的挂载点）|
|/media |挂载目录|
|/root |超级用户的家目录|
|/tep|临时目录|
|/sbin |命令保存目录（超级用户才能使用的目录）|
|/proc 与 /sys|直接写入内存的|
|/usr|系统软件资源目录|
|/usr/bin/|系统命令（普通用户）|
|/usr/sbin/|系统命令（超级用户）|
|/var|系统相关文档内容|

***

# 命令的基本格式
> **命令 [选项] [参数]**

各个选项相对独立，可以组合到一个 ”-“ 后书写，也可以各自分别跟在 ”-“ 后。

***


# 目录与文件处理命令（同“文件夹”的概念）

##查询目录中的内容（ls）

* 名称：ls（全称 list directory contents）
* 写法：ls [各个文件位置（多个目录可以分开写）]
* 选项：
-a  显示所有文件(包括隐藏文件)
-l  长格式(详细信息)【ls -l = ll】
-d  显示目录的属性
-h  人性化显示  
-i  显示inode

* 解释
文件权限 引用计数 u所有者 g所属组 文件大小
* 首位：文件格式
>   "-" 文件
    "d" 目录
    "|" 软连接文件

* 后九位：基本权限
    u所有者 g所属组 o其他人
    r读 w写 x执行

***
## 创建目录
|命令| 选项 |作用|
|:-:|:-:|:-:|
|**mkdir**（来自 make directories）|-p| 递归创建（用于建立多级目录的时候）

## 复制文件或目录
* 名称：cp（来自 copy）【可以原名复制，也可以改名复制】
* 写法：**cp [选项] [原文件或目录] [目标目录(支持自动创建一层子目录)] [要改成的文件名]**
* 选项：
-r 复制目录
-p 连带文件属性复制
-d 若源文件是链接文件，则复制链接属性
-a 复制所有属性（一毛一样），相当于 -pdr

## 剪切或改名命令
* 名称：mv（来自 move）
* 写法：**mv [原文件或目录] [目标目录(支持自动创建一层子目录)] [要改成的文件名]**

## 删除目录
* 名称：rmdir（来自 remove empty directories）只能删除 **空目录**

## 删除文件或目录
* 名称：rm（来自 remove）
* 选项：
-i 执行前提示确认信息
-r 删除目录
-f 强制（force） 

## 切换所在目录
|命令| 选项 |作用|
|:-:|:-:|:-:|
|**cd**（来自 change directory）
|cd~ 或 cd |进入当前用户的家目录
|cd - |进入上次目录
|cd .. |进入上级目录
|cd . |进入当前目录


## 显示当前所在位置
|命令| 选项 |作用|
|:-:|:-:|:-:|
|pwd（来自 print working directory )

## 相对路径与绝对路径
* 相对路径：参照当前所在目录的路径
* 绝对路径：从根目录开始指定，达到目标的路径

## 链接
* 名称：ln（来自 link）
* 写法：ln [原文件的**绝对路径**] [目标文件]
不写绝对路径的话，软连接只能在相同目录下才能正常存在，否侧会报错
* 选项：
-s 创建软连接（soft）（软连接类似与快捷方式，有独立的磁盘数据，只保留了指向那个文件的信息）（硬链接：是相同磁盘数据的另一个引用）

## 输出文件内容
|命令| 选项 |作用|
|:-:|:-:|:-:|
|**cat** [文件名]

## 显示分区列表
|命令| 选项 |作用|
|:-:|:-:|:-:|
| fdisk | -l | 显示分区的详细信息

***

# 挂载

把设备文件挂在到盘符上
***
## 挂载命令

### 基本格式
格式：**mount [-t 文件系统] [-o 特殊选项] 设备文件名 挂载点**

### 基本格式的说明：

#### 文件系统
ext3(老linux)、ext4(新linux)、
iso9660(光盘)
vfat（windows 中的 fat32）

***
#### 特殊选项
多个特殊选项用 "," 隔开
| 选项 |作用|
|:-:|:-:|
|remount|重新挂载已经挂载的文件系统，一般用于指定修改特殊权限|
|exec/noexec|执行/不执行，设定是否允许在文件系统中执行可执行文件，默认允许

***
#### 设备文件名
| 实体 | 文件名 |
|:-:|:-:|
|光盘|**/dev/sr0** 或 **/dev/cdrom**(软链接)

***
#### 挂载点
已存在的空白目录（根目录下 "media"、"mnt"、"misc" 都是系统为挂载预留的空目录）

***
### 常用命令
|命令| 选项 |作用|
|:-:|:-:|:-:|
| mount || 查询系统中已经挂载的设备 |
|| -a | 依据配置文件"/etc/fstab"(管理系统启动时候的挂载信息)进行挂载

***
## 卸载命令

### 基本格式
格式：umount 设备文件名或挂载点
说明：需要先离开待卸载位置中的目录

## 光盘挂载实例
>*注：虚拟机光驱"已连接相当于接通光驱"*

>1、创建挂载点
mkdir /mnt/cdrom

>2、将设备文件挂载到挂载点
mount -t iso9660 dec/sr0 /mnt/cdrom

>3、卸载挂载的光盘
umount /mnt/cdrom

## U 盘挂载实例

>1、查看当前分区情况
fdisk -l

>2、创建挂载点
mkdir /mnt/usb/

>3、将U盘挂载到挂载点
mount -t vfat /dev/sdb1 mnt/usb

*linux 不能支持 NTFS 文件系统，虽然可以使用 ntfs-3g，但也只能做到只读，因此更推荐网络传输文件*

***

# 帮助命令

##官方手册
* 名称：man（来自 manual）
* 写法：man [帮助等级] [要查看帮助的命令]
不输入等级号，默认打开最低等级的帮助信息
* 选项：
-f 查看帮助级别（相当于 whatis）
-k 模糊查找所有相关的帮助信息（相当于 apropos）
* 使用：
q 键退出
h 显示帮助文档的操作说明
/-x 自动跳转到含有 “-x” 的说明处：此时输入 n（next）查看下一个；输入 N 查看上一个

## 查询命令帮助级别
* 名称：whatis

## 查看所有可能相关的帮助信息
* 名称：apropos

## 选项帮助
* 名称：--help
* 写法：[要查村帮助的命令] --help

## shell 内部命令帮助
help shell内部命令

## 详细命令帮助
|命令| info内部操作 |作用|
|:-:|:-:|:-:|
|**info**|-回车| 进入子帮助页面
||-u| 进入上一层帮助页面
||-p| 进入上一个帮助小节
||-n| 进入下一个帮助小节
||-q| 退出

***

# 关机与重启命令

## 重启命令
* 名称：reboot
相当于 shutdown -r

## 关闭命令
* 名称：shutdown [选项] 时间
shutdown可以在关机与重启时，正确保存服务
* 选项：
-c 取消前一个关机命令
-h 关机（不要远程关机）
-r 重启

## 调用系统运行级别
* 名称：init 数字
* 解释：
0 关机
1 单用户（类似于 windows 的安全模式）
2 不完全多用户，不含NFS服务
3 完全多用户
4 未分配
5 图形界面
6 重启

## 查询当前运行级别
* 名称：runlevel
* 返回：N [数字]。。。
* 解释：自开机起，经历的界别

## 推出登陆（注销）
* 名称：logout

***

# 网络相关

## 查看本机所使用的端口
|命令| 选项 |作用|
|:-:|:-:|
| netstat | -a | 查看所有连接和监听端口
|| -n | 显示IP地址和端口号，而不现实域名和服务名

## 查看IP


## 重启网络服务
|命令| 选项 |作用|
|:-:|:-:|
| service network restart

***
## 配置 IP 地址

### ifconfig
* 名称：ifconfig（查看当前的网络状态）
* 临时设置网卡（这里以 eth0 为例）的 IP 与 子网掩码：ifconfig rth0 192.168.0.200 netmask 255.255.255.0
* 这种方式只是临时修改，不写入配置文件。重启之后，系统会从新从配置文件读取网络的相关配置
* 其他用法：
ifconfig eth0 →查看IP 不过输出的信息多一些
ifconfig|grep 'Bcast'  → 这个输出的信息要清晰多了

### setup
* 名称：setup
* 按图形界面填写

### 修改网络配置文件

* 需要修改的几个文件包括：
| 配置参数 | 配置含义 |
| :-: | :-: |
| /etc/sysconfig/network | 设置主机名和网络配置 |
| /etc/sysconfig/network-scripts/ifcfg-eth0 | 针对特定的网卡进行设置 |
| /etc/resolv.conf | 设置DNS |
| /etc/hosts | 设置指定的域名解析地址 |

* 一般我们只需要修改网卡的配置文件就可以了，配置文参数参考件如下：
| 配置参数 | 配置含义 |
| :-: | :-: |
| DEVICE=eth0 | 网卡设备名（必须与文件名称匹配）|
|TYPE=Ethernet | 类型为以太网 |
| UUID=1eb6fdd4-33a5-4805-a747-98658ea52e22 | 唯一识别码 |
| ONBOOT=yes | 当前网卡是否会随网络服务启动 |
| NM_CONTROLLED=yes | 是否可以由 Network Manager 图形管理工具托管 |
| BOOTPROTO=static | 使用DHCP服务器自动获取IP（dhcp）还是 静态IP（static 或 none）|
| HWADDR=00:0C:29:AD:85:1D | MAC 地址 |
| IPADDR=192.168.56.101 | IP地址 |
| NETMASK=255.255.255.0 | 子网掩码 |
| NETWORK=192.168.56.1 | 网关（或写作 GATEWAY）|
| BROADCAST=192.168.56.255 | 广播地址 |
| DEFROUTE=yes |
| PEERDNS=yes |
| PEERROUTES=yes |
| IPV4_FAILURE_FATAL=yes |
| IPV6INIT=no | 是否启用了 IPv6 |
| NAME="System eth0" |


* 需要添加的几项内容的解释：
IPADDRIP         地址  
NETMASK          子网掩码  
NETWORK          网关地址 

### 图形界面操作
* 图形界面配置IP
* 按图形界面填写

***



# 软件安装

## 软件包分类
源码包
二进制包（RPM包、系统默认包）

***
## RPM 包

***
### 命名规则
http-2.2.15-15.el6.centos.1.i686.rpm
|字符段|含义|
|:-:|:-:|
|-http|软件包名
|-2.2.15|软件版本
|-15|软件的发布次数
|-el6.centos|适合的Linux平台
|-i686|适合的硬件平台
|-rpm|rpm包扩展名

***
### RPM包依赖性
|依赖类型|解释|
|:-:|:-:|
|属性依赖|a -> b -> c
|环形依赖|a -> b -> c -> a
|模块依赖|错误提示，需要依赖以".so.数字"结尾的一个东西，实际上依赖的是一个文件（到 www.rpmfind.net 查找该文件所在的 rpm 包）

***
### 安装命令

> 包全名：
操作的包是没有安装的软件包时，使用包全名，而且i要注意绝对路径

> 包名：
曹祖偶已经安装的软件包时，使用包名，是搜索 /var/lib/rpm/ 中的数据库

**常用写法：rpm -ivh 包全名/或包名**

|命令|选项|含义|
|:-:|:-:|:-:|
|rpm|-i|安装（install）
||-v|显示详细信息（verbose）
||-h|显示进度（hash）
||--nodeps|不检测依赖性（no dependence）

***
## yum 包

***
### yum 源文件

在 /etc/yum.repos.d/ 中

以CentOS-Base.repo为例：
|参数|含义|
|:-:|:-:|
|[base]|容器名称，一定要放在 [ ] 中|
|name|容器说明，可以自己随便写|
|mirrorlist|镜像站点，可以注释掉|
|baseurl|yum 源服务器地址。默认是CentOS官方的 yum 源服务器|
|enabled|此容器是否生效（不写，或 enable=1 为生效 // enable=0 为不生效）|
|gpgcheck|RPM 的数字证书是否生效， 1 为生效，0为不生效|
|gpgkey| 数字证书的公钥文件保存位置，不用修改|

***
### 本地 yum 源

* 1、挂载光盘
* 2、使网络 yum 源失效
修改 **/etc/yum.repos.d/CentOs-Base.repo** 的文件名，使系统暂时不能找到网络 yum 配置文件
* 3、使光盘 yum 源生效
```
1、修改 **/etc/yum.repos.d/CentOs-Media.repo** 的 baserul=file:///mnt/cdrom（指向当前光盘挂载点）
2、注释掉无用的 url （行首顶头加#）
3、修改 enable=1 使其生效
```
* 4、检查成果 
shell命令：yum list （yum 包最后的容器信息与本地 yum 配置文件的容器名称相同，默认为 c6-media）

### yum 命令
|参数|含义|
|:-:|:-:|
| yum list | 查询所有可用软件包列表 |
| yum search 关键字 | 搜索服务器上所有和关键字相关的包 |
| yum -y install 包名 |- y 自动回答 yes  而且 yum 安装只写"包名"即可找到 |
| yum -y update 包名 | 升级软件（！注意如果忽略了包名将会更新所有软件，包括内核，所以会直接导致CentOS崩溃！） |
| yum -y remove 包名 | 卸载（最好的方案是最小化安装，用什么装什么，尽量不要卸载，很可能有依赖性问题）|
|软件组管理命令 |
| yum grouplist | 列出所有可用的软件组列表 |
| yum groupinstall 软件组名 | 安装指定的软件组，组名可以由 grouplist 查询出来 |
| yum groupmove 软件组名| 卸载指定的软件组 |



### Git 相关
- git clone	| 下拉代码
- git add . | 递归添加所有文件
- git commit -m "xxx" | 提交
- git push | 将本地修改推送到网络仓库