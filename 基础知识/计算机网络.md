# 计算机网络

标签（空格分隔）： 计算机网络

---

[toc]

***

# ISO/OSI 七层模型
| 层 | 数据单位 | 包含信息 | 作用 | 实例
| :-: | :-: | :-: |
| 1.应用层 |  |  | 用户接口 | 登陆邮箱，写邮件，点击发送
| 2.表示层 |  |  | 数据的表现形式（文件格式） | 将邮件内内容根据文件格式，翻译成二进制码
| 3.会话层 |  |  |  | 判断是否要进行网络传递
| 4.传输层 |  | 端口号【收件人】 | 确定传输协议，确立端口号 | 写清TCP协议，写入邮件端口号
| 5.网络层 | 报文 | ip地址(公网)【门牌号】 |  写入ip地址，自动选择路径 | 写入自己的ip地址，写入目标的ip
| 6.数据链路层 | 帧 | 硬件MAC地址(内网) | 成帧，根据MAC地址访问 | 写入己方MAC地址，写入目标MAC地址
| 7.物理层 | 比特 | 二进制码 |  比特流的传递，物理线材连接 | 在网络中实际传输数据

***

# TCP/IP 四层模型
| 层 | 协议 | 数据封装实例| 
| :-: | :-: | :-: |
| 应用层(1.2.3) | 为用户提供的各种服务 | FTP头+数据
| 传输层 (4)| 传输控制协议(TCP),用户数据报协议（UDP）| TCP头+FTP头+数据
| 网际互联层(5) | 网际协议(IP),互联网组管理协议(IGMP),互联网控制报文协议(ICMP) | IP头+TCP头+FTP头+数据
| 网络接口层 (6.7)| 地址解析协议(ARP) | 以太帧头+IP头+TCP头+FTP头+数据

## TCP协议（传输控制协议）
TCP/IP三次握手

### 为什么是三次
> 有几个已知条件：
1、有两方相互通讯
2. 每一方在第一次接收到信息之后，都应该回信，来表明自己确实接收到了信息。
3. 必须有一方先发出消息
所以我们来总结一下：甲打破沉寂向乙发送一条信息；乙接收到信息之后，做出回应；甲方接收到乙的回应后，做出回应。
所以就是三次了。

## ARP协议（地址解析协议）
把 **IP地址** 翻译为 **物理地址**

***

# IP地址

## 长度：

32位的长度

* 二进制:
从 00000000.00000000.00000000.00000000
到 11111111.11111111.11111111.11111111

* 换算成十进制之后：
从 0.0.0.0 
到 255.255.255.255

## IP地址分类
| 网络类别 | 最大网络数 | IP地址范围 | 最大主机数 | 私有IP地址范围 |
| :-: | :-: | :-: | :-: | :-: | :-: |
| A | 126(2^7-2) | 1.0.0.0--126.255.255.255 | 2^24-2 | 10.0.0.0--10.255.255.255 |
| B | 16384(2^14) | 128.0.0.0--191.255.255.255 | 2^16-2 | 172.16.0.0--172.31.255.255 |
| c | 2097152(2^21) | 192.0.0.0--223.255.255.255 | 2^8-2 | 192.168.0.0--192.168.255.255 |
*127.0.0.0 代表计算机自己*

> 每个网络的 **第一个地址** 代表 **网络本身**（如：1.0.0.0）
每个网络的 **最后一个地址** 代表 **当前网络的广播地址**（如：1.255.255.255）
*广播地址是专门用于同时向网络中所有工作站进行发送的一个地址*

不同网络相互联系使用：路由器
相同网络相互联系使用：交换机

* A 类 IP
第一个段数代表不同的网段，后24位二进制数代表同一个网络下不同的主机
* B 类 IP
前两段数代表不同的网段，后16位二进制数代表同一个网络下不同的主机
* C 类 IP
前三段数代表不同的网段，后8位二进制数代表同一个网络下不同的主机
* 私有 IP : 免费的，用于扩展公网 IP 的使用场景的 IP，不具备独立访问网络的能力。

***

# 子网掩码
用来规定 IP 地址中： 哪一个数字变化，代表的是不同网段；哪一个数字变化，代表的是同一个网络下的不同主机。
> 与子网掩码中 255 对应的数字，代表网络中不同的网段；
与子网掩码中 0 对应的数字，代表相同网段中的不同主机

*核心规则是二进制写法中，左起连续的“1”对应的位置 和“0”对应的位置*

* 标准子网掩码
255.0.0（A类）
255.255.0.0（B类）
255.255.255.0（C类）
> **IP 与 子网掩码 并没有在类别上要求严格对应**：
将 IP 与 子网掩码 换算成二进制，然后把两个二进制数进行“按位与”，就可以得出该网络的 网络地址（网段中的第一位）,
将网络地址中所有的 0，都换成 1 就得到了广播地址。

***

# 端口
IP 地址是门牌号码，**端口号** 是收件人
*通过 IP 找到了计算机之后，还要告诉计算机“要求计算机提供哪个服务”*

## 长度
16位二进制数，共 2^16个

## 常见端口号
FTP（文件传输协议）：20、21
SSH（安全 shell 协议）：22
telnet（远程登陆协议）：23（明文传递，能不用就不用）
DNS（域名系统）：53
http（超文本传输协议）：80（网页）
SMTP（简单邮件传输协议）：25（发信）
POP3（邮件协议3代）：110（收信）

***

# DNS
名称解析
Domain Name System （域名系统）
域名：诸如 www.baidu.com
将 域名 与 IP地址 之间进行转换
windows 中 使用 hosts文件来记录一些 域名与IP 的匹配对

## DNS 服务器
接收域名，返回 IP 地址

## 域名空间结构
完整域名空间 = 三级域 + 二级域 + 一级域
完整域名应该是全球唯一的

根域 "."

顶级域 
| 顶级域名 | 说明 |
| :-: | :-: |
|组织域
| gov | 政府部门 |
| com | 商业部门 |
| edu | 教育部门 |
| org | 民间团体组织 |
| net | 网络服务机构 |
| mil | 军事部门 |
| 国家与地区域 |
| cn | 中国 |
| jp | 日本 |
| uk | 英国 |
| au | 澳大利亚 |
| hk | 中国香港 |

二级域
申请购买的（如：Microsoft、IBM、baidu、163）

三级域：主机域名
购买二级域之后，自行决定的（如：www、NEWS）

## DNS服务过程
> 本地DNS服务器按照域名服务器的级别，逐级查询，得到信息

1、客户机 --> 本地域名服务器 --> 根DNS服务器：返回一级域服务器 IP 地址
2、本地域名服务器 --> 一级服务器：返回二级域服务器 IP 地址
3、本地域名服务器 --> 二级服务器：找到域名对应的IP --> 本地域名服务器 --> 客户机

> 递归查询
要么做出成功的相应，要么做出查询失败的响应。一般客户机与服务器之间属递归查询

> 迭代查询
服务器收到一次迭代查询返回一次结果，这个结果不一定是目标 IP 与域名的映射关系，也可以是其他 DNS 服务器的地址

> 正向查询：由域名查找 IP 地址；反向查询：由 IP 地址查询域名

***

# 网关
网间连接器、协议转换器
一般是路由器，或者能实现路由功能的设备
功能：
1、在不同的网段之间传输数据
2、在 内网IP 和 公网IP 之间转换