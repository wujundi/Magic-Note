# NOAH的重装

这真是一个艰难的决定，在本地机器环境崩溃之后，我只能重装系统，然后伴随着重装系统的ip变化，容器也无法启动了。

我尝试了很多办法调试容器和ambari配置文件中对ip的配置，都没有效果。

主要矛头指向两个部分：

1、现在的镜像内还有一些残存的，ambari-server 版本时候配置的影子（虽然我不知道是怎么搞进来的，我印象中做noah的时候应该已经是完全的重装重装了）

2、之前在安装的 bigtop 镜像的时候，我使用了当时 wsl  的 ip （baseurl=http://172.18.254.162:2929/bigtop/），这个 IP 就像幽灵一样，在每一次 ambari 启动的时候都会将其作为 yum 源去扫描。或者说，ambari 不是每次启动都需要从 bigtop 镜像重新安装一遍，但是它却每次都需要找得到那台机器才行。那我把 bigtop 机器的 ip 写死了，这就非常尴尬，总不能每次基础环境更换，就不能复用容器了吧。

综上，我决定还是要再次大搞一番。

本次安装必须遵照两个原则：

1、所有环节都 100% 的重新安装，杜绝一些不明所以的配置变量

2、所有环节都必须实现通用化，禁止一切与基础环境绑定的事项。

好的，开干

---
